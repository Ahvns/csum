%%  IDENTIFICATION  %%
%   Provides headers for course summary document class
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{csumhdr}[2022/05/06 version 1.00 Course Summary headers]

%%  USED PACKAGES   %%
\RequirePackage{fancyhdr}%
\RequirePackage{xcolor}%
\RequirePackage{xstring}%
\RequirePackage{csuminf}%

%%  CODE    %%
\pagestyle{fancy}%
\fancyhf{}%

\newcommand{\@cfooter}{}%

\newcommand{\@chdrcourseoptions}{%
  \renewcommand{\partmark}[1]{\markboth{}{##1}}%
  \renewcommand{\sectionmark}[1]{%
    \renewcommand{\@csec}{##1}%
    \markboth{}{##1}%
  }%
  \renewcommand{\subsectionmark}[1]{\markboth{##1}{\@csec}}%
  \renewcommand{\@cfooter}{%
  Summary~for~%
  \ifx\@coursecode\@empty%
      \relax%
  \else%
      \textsc{\@coursecode}~---~%
  \fi%
  \@course%
  }%
}%

\newcommand{\@chdrarticleoptions}{%
  \renewcommand{\partmark}[1]{\markright{##1}}%
  \renewcommand{\sectionmark}[1]{\markboth{##1}{}}%
  \renewcommand{\subsectionmark}[1]{}%
  \renewcommand{\@cfooter}{Article~notes~for~\@course}%
}%

\newcommand{\headertype}[1]{%
  % Check if input is equal to one of specified options, otherwise revert to default
  \IfStrEqCase{#1}{%
    {course}{\@chdrcourseoptions}%
    {article}{\@chdrarticleoptions}%
  }%
}%

\headertype{course}% initialise

\renewcommand{\headrulewidth}{0pt}%

\newcommand{\@csec}{}%

\setlength{\headheight}{15pt}%

%%  FOOTER  %%
\rfoot{\thepage}%

\lfoot{%
    \sffamily%
    \footnotesize%
    \textcolor{gray}{\@cfooter}%
    }%

%%  HEADER  %%
\rhead{%
    \sffamily%
    \footnotesize%
    \textcolor{gray}{%
        \leftmark%
        }%
    }%

\lhead{%
    \sffamily%
    \small%
    \textcolor{gray}{%
        \rightmark%
        }%
    }%
