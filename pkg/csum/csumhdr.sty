%%  IDENTIFICATION  %%
%   Provides headers for course summary document class
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{csumhdr}[2022/05/06 version 1.00 Course Summary headers]

%%  USED PACKAGES   %%
\RequirePackage{fancyhdr}%
\RequirePackage{csuminf}%
\RequirePackage{xcolor}%

%%  CODE    %%
\pagestyle{fancy}%
\fancyhf{}%

\renewcommand{\headrulewidth}{0pt}%

\newcommand{\csec}{}%

\setlength{\headheight}{15pt}%

%%  FOOTER  %%
\rfoot{\thepage}%

\lfoot{%
    \sffamily%
    \footnotesize%
    \textcolor{gray}{%
        Summary~for~%
        \ifx\@coursecode\@empty%
            \relax%
        \else%
            \textsc{\@coursecode}~---~%
        \fi%
        \@course%
        }%
    }%

%%  HEADER  %%
\newcommand{\csumhdr}{%
    \rhead{%
        \sffamily%
        \footnotesize%
        \textcolor{gray}{%
            \leftmark%
            }%
        }%
    
    \lhead{%
        \sffamily%
        \small%
        \textcolor{gray}{%
            \rightmark%
            }%
        }%
    }%

\csumhdr%

\newcommand{\emptyhdr}{%
    \rhead{}%
    \lhead{}%
    }%

%%  MARKS   %%
\renewcommand{\partmark}[1]{%
    \markboth{}{#1}%
    }%
%\renewcommand{\partmark}[1]{}%

\renewcommand{\sectionmark}[1]{%
    \csumhdr%
    \renewcommand{\csec}{#1}%
    \markboth{}{#1}
    }%
    
\renewcommand{\subsectionmark}[1]{%
    \markboth{#1}{\csec}%
    }%